\include{commands}

\documentclass{tikzposter}
\usetikzlibrary{positioning}
\usetheme{Rays}

\usepackage{url}

\makeatletter
\def\title#1{\gdef\@title{\scalebox{\TP@titletextscale}{%
\begin{minipage}[t]{\linewidth}
\centering
#1
\par
\vspace{0.5em}
\end{minipage}%
}}}
\makeatother

\settitle{ \centering \vbox{     \@titlegraphic \\[\TP@titlegraphictotitledistance] \centering     \color{titlefgcolor} {\bfseries \Huge \@title \par}     \vspace*{1em}     {\huge \@author \par} \vspace*{1em} {\LARGE \@institute}}}

\title{Exploring the charm content of jets \\
in \pp\ collisions with ALICE}
\author{Salvatore Aiola, on behalf of the ALICE Collaboration}
\institute{Yale University\\[0.5cm] \url{salvatore.aiola@yale.edu}}

\makeatletter
\newcommand\insertlogoi[2][]{\def\@insertlogoi{\includegraphics[#1]{#2}}}
\newcommand\insertlogoii[2][]{\def\@insertlogoii{\includegraphics[#1]{#2}}}
\newcommand\insertlogoiii[2][]{\def\@insertlogoiii{\includegraphics[#1]{#2}}}
\newlength\LogoSep
\setlength\LogoSep{-150pt}

\insertlogoi[width=8cm]{img/yale}
\insertlogoii[width=4cm]{img/yale_text}
\insertlogoiii[width=7cm]{img/alice}

\renewcommand\maketitle[1][]{  % #1 keys
    \normalsize
    \setkeys{title}{#1}
    % Title dummy to get title height
    \node[transparent,inner sep=\TP@titleinnersep, line width=\TP@titlelinewidth, anchor=north, minimum width=\TP@visibletextwidth-2\TP@titleinnersep]
        (TP@title) at ($(0, 0.5\textheight-\TP@titletotopverticalspace)$) {\parbox{\TP@titlewidth-2\TP@titleinnersep}{\TP@maketitle}};
    \draw let \p1 = ($(TP@title.north)-(TP@title.south)$) in node {
        \setlength{\TP@titleheight}{\y1}
        \setlength{\titleheight}{\y1}
        \global\TP@titleheight=\TP@titleheight
        \global\titleheight=\titleheight
    };

    % Compute title position
    \setlength{\titleposleft}{-0.5\titlewidth}
    \setlength{\titleposright}{\titleposleft+\titlewidth}
    \setlength{\titlepostop}{0.5\textheight-\TP@titletotopverticalspace}
    \setlength{\titleposbottom}{\titlepostop-\titleheight}

    % Title style (background)
    \TP@titlestyle

    % Title node
    \node[inner sep=\TP@titleinnersep, line width=\TP@titlelinewidth, anchor=north, minimum width=\TP@visibletextwidth-2\TP@titleinnersep]
        at (0,0.5\textheight-\TP@titletotopverticalspace)
        (title)
        {\parbox{\TP@titlewidth-2\TP@titleinnersep}{\TP@maketitle}};

    \node[inner sep=0pt,anchor=west] 
    (logo_yale_shield)
      at ([shift={(-\LogoSep,1.5cm)}]title.west)
      {\@insertlogoi};
      
    \node[inner sep=0pt,anchor=west,below=of logo_yale_shield] 
        (logo_yale)
      %at ([xshift=\LogoSep]title.east)
      {\@insertlogoii};

    \node[inner sep=0pt,anchor=east] 
        (logo_alice)
      at ([xshift=\LogoSep]title.east)
      {\@insertlogoiii};

    % Settings for blocks
    \normalsize
    \setlength{\TP@blocktop}{\titleposbottom-\TP@titletoblockverticalspace}
}
\makeatother

\begin{document}

\maketitle[width=.9\textwidth]

\begin{columns}
\column{.35}
\block{Introduction}{bla bla}
\column{.65}
\block{ALICE}{bla bla}
\end{columns}
\end{document}
